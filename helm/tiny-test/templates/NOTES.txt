Thank you for installing tiny-test!

Image used: {{ .Values.image.registry }}/{{ .Values.image.repository }}:{{ .Values.image.tag }}

Your release is named: {{ .Release.Name }}
Deployed to namespace: {{ .Release.Namespace }}

To access the application:

{{- if eq .Values.service.type "ClusterIP" }}

1. Port-forward to access locally:
   kubectl port-forward -n {{ .Release.Namespace }} svc/{{ include "tiny-test.fullname" . }} 8080:{{ .Values.service.port }}

   Then visit: http://localhost:8080

{{- else if eq .Values.service.type "NodePort" }}

1. Get the NodePort:
   export NODE_PORT=$(kubectl get -n {{ .Release.Namespace }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ include "tiny-test.fullname" . }})
   export NODE_IP=$(kubectl get nodes -o jsonpath="{.items[0].status.addresses[0].address}")
   echo "http://$NODE_IP:$NODE_PORT"

2. For Minikube:
   minikube service -n {{ .Release.Namespace }} {{ include "tiny-test.fullname" . }}

{{- else if eq .Values.service.type "LoadBalancer" }}

1. Get the LoadBalancer IP:
   kubectl get svc -n {{ .Release.Namespace }} {{ include "tiny-test.fullname" . }} -w

   Wait for EXTERNAL-IP to be assigned, then visit:
   http://<EXTERNAL-IP>:{{ .Values.service.port }}

{{- end }}

Useful commands:

  # View pods
  kubectl get pods -n {{ .Release.Namespace }} -l app={{ include "tiny-test.name" . }}

  # View logs
  kubectl logs -n {{ .Release.Namespace }} -l app={{ include "tiny-test.name" . }}

  # Health check
  kubectl port-forward -n {{ .Release.Namespace }} svc/{{ include "tiny-test.fullname" . }} 8080:{{ .Values.service.port }}
  curl http://localhost:8080/healthz
  curl http://localhost:8080/info
  curl http://localhost:8080/metrics
